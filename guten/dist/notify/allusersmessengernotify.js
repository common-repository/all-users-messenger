!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.wp.apiFetch,n=e.n(a),s=window.wp.components;(0,t.render)((0,t.createElement)((()=>{const e=parseInt(allusersmessengernotify_data.userid),a=1e3*parseInt(allusersmessengernotify_data.interval_sec),r=JSON.parse(allusersmessengernotify_data.notify_message),[l,m]=(0,t.useState)(r.username),[u,o]=(0,t.useState)(r.avatar),[i,c]=(0,t.useState)(r.datetime),[d,_]=(0,t.useState)(r.message),[f,g]=(0,t.useState)(parseInt(r.unread)),[p,y]=(0,t.useState)(r.unread_text),[E,b]=(0,t.useState)(Boolean(allusersmessengernotify_data.message_modal)),[v,w]=(0,t.useState)(Boolean(allusersmessengernotify_data.notify)),S=()=>b(!1);(0,t.useEffect)((()=>{let t=setInterval((()=>{n()({path:"rf/all_users_messenger_notify_api/token",method:"POST",data:{userid:e}}).then((e=>{e.notify&&(g(e.unread),w(!0),e.message_modal&&(m(e.username),o(e.avatar),c(e.datetime),_(e.message),y(e.unread_text),b(!0)))}))}),a);return()=>{clearInterval(t)}}),[l,i,d,f]);const h=[];if(E){let e=d.split(/\r\n|\n/),a=[];Object.keys(e).map((n=>{a.push((0,t.createElement)(t.Fragment,null,e[n],(0,t.createElement)("br",null)))})),h.push((0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.Modal,{title:allusersmessengernotify_data.modal_title,onRequestClose:S,isDismissible:!0,className:"message_notify_modal_content"},(0,t.createElement)("div",{className:"avatar-name-datetime-message"},(0,t.createElement)("img",{src:u}),(0,t.createElement)("span",null,l,(0,t.createElement)("br",null),i,(0,t.createElement)("br",null),a)),(0,t.createElement)("p",null,(0,t.createElement)("p",{className:"description"},p)),(0,t.createElement)(s.Button,{variant:"primary",className:"message_notify_button",onClick:S},allusersmessengernotify_data.close_label),(0,t.createElement)("p",{className:"message_notify_title"},allusersmessengernotify_data.menu_title))))}const N=[];return v&&N.push((0,t.createElement)(t.Fragment,null,allusersmessengernotify_data.unread_bar_label,(0,t.createElement)("span",{className:"notify_bar_num"},f))),(0,t.createElement)(t.Fragment,null,h,N)}),null),document.getElementById("all-users-messenger-notify"))}();